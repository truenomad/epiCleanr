<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="epiCleanr">
<title>Using epiCleanr ‚Ä¢ epiCleanr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using epiCleanr">
<meta property="og:description" content="epiCleanr">
<meta property="og:image" content="https://truenomad.github.io/epiCleanr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epiCleanr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using_epicleanr.html">Using epiCleanr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/truenomad/epiCleanr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using epiCleanr</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/truenomad/epiCleanr/blob/HEAD/vignettes/using_epicleanr.Rmd" class="external-link"><code>vignettes/using_epicleanr.Rmd</code></a></small>
      <div class="d-none name"><code>using_epicleanr.Rmd</code></div>
    </div>

    
    
<!-- #  <img src="../man/figures/logo.png" align="right" height="128" style="float:right; height:110px;"> -->
<!-- <!-- badges: start -->
<!-- [![R build status](https://github.com/truenomad/epicleanr/workflows/R-CMD-check/badge.svg)](https://github.com/truenomad/epicleanr/actions) -->
<!-- [![CodeFactor](https://www.codefactor.io/repository/github/truenomad/epicleanr/badge)](https://www.codefactor.io/repository/github/truenomad/epicleanr) -->
<!-- [![codecov](https://codecov.io/gh/truenomad/epiCleanr/graph/badge.svg?token=F0H9LLAXAX)](https://app.codecov.io/gh/truenomad/epiCleanr?branch=main) -->
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>This package offers a tidy solution for epidemiological data. It
houses a range of functions for epidemiologists and public health data
wizards for data management and cleaning. These include:</p>
<ul>
<li>
<code><a href="../reference/import.html">import()</a></code> imports files of any formats.</li>
<li>
<code><a href="../reference/export.html">export()</a></code> exports files of any formats.</li>
<li>
<code><a href="../reference/get_admin_names.html">get_admin_names()</a></code> downloads admin names using various
country codes and naming conventions.</li>
<li>
<code><a href="../reference/clean_admin_names.html">clean_admin_names()</a></code> cleans admin names using both
user-provided and downloaded admin data.</li>
<li>
<code><a href="../reference/create_test.html">create_test()</a></code> creates a unit-testing functions to
perform various data validation.</li>
<li>
<code><a href="../reference/consistency_check.html">consistency_check()</a></code> plot to see if certain variables
exceed others (i.e., tests vs cases).</li>
<li>
<code><a href="../reference/handle_outliers.html">handle_outliers()</a></code> detects outliers using various
approaches, and offers functionality to manage them.</li>
<li>
<code><a href="../reference/missing_plot.html">missing_plot()</a></code> plots missing data or reporting rate for
given variable(s) by different factors.</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is yet to be available on Cran, but can be installed
using devtools in R.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The way to install it via CRAN once available</span></span>
<span><span class="co"># install.packages("epiCleanr")</span></span></code></pre></div>
<p>You can install the latest development version from GitHub by
using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If you haven't installed the 'devtools' package, run:</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"truenomad/epiCleanr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="import-and-export">Import and export<a class="anchor" aria-label="anchor" href="#import-and-export"></a>
</h3>
<p>Inspired by <code>rio</code>, the import function allows you to read
data from a wide range of file formats. Additional reading options
specific to each format can be passed through the ellipsis (‚Ä¶) argument.
Similarly, the export function provides a simple way to export data into
various formats.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the epiCleanr package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/truenomad/epiCleanr" class="external-link">epiCleanr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reading a CSV file with a specific seperator</span></span>
<span><span class="va">data_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"path/to/your/file.csv"</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import the first sheet from an Excel file</span></span>
<span><span class="va">data_excel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import.html">import</a></span><span class="op">(</span><span class="st">"path/to/your/file.xlsx"</span>, sheet <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export a Stata DTA file</span></span>
<span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="st">"path/to/your/file.dta"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export an RDS file</span></span>
<span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span><span class="va">my_data</span>, <span class="st">"path/to/your/file.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export an Excel file with sheets</span></span>
<span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>my_data <span class="op">=</span> <span class="va">my_data1</span>, my_data2 <span class="op">=</span> <span class="va">my_data2</span><span class="op">)</span>, <span class="st">"path/to/your/file.xlsx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="clean-strings">Clean strings<a class="anchor" aria-label="anchor" href="#clean-strings"></a>
</h3>
<p>The <code><a href="../reference/clean_names_strings.html">clean_names_strings()</a></code> function offers additional
flexibility by allowing you to clean not just strings within columns but
also the column names themselves.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For data frame with snake_case (default)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="co"># &gt; "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"   </span></span>
<span> </span>
<span><span class="va">cleaned_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clean_names_strings.html">clean_names_strings</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">cleaned_iris</span><span class="op">)</span></span>
<span><span class="co"># &gt; "sepal_length" "sepal_width"  "petal_length" "petal_width"  "species"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="download-administrative-names">Download administrative names<a class="anchor" aria-label="anchor" href="#download-administrative-names"></a>
</h3>
<p>You can download administrative names (such as districts, provinces,
etc.,) for a given country via the <code>GeoNames</code> website using
country name or codes to pull the data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get admin names for Togo</span></span>
<span><span class="va">admin_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_admin_names.html">get_admin_names</a></span><span class="op">(</span>country_name_or_code <span class="op">=</span> <span class="st">"Togo"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Different admin levels are saved as a list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">admin_names</span><span class="op">$</span><span class="va">adm2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt;'data.frame': 30 obs. of  7 variables:</span></span>
<span><span class="co">#&gt; $ country_code  : chr  "TG" "TG" "TG" "TG" ...</span></span>
<span><span class="co">#&gt; $ asciiname     : chr  "Vo Prefecture" "Zio Prefecture" "Tchaoudjo" "Tchamba" ...</span></span>
<span><span class="co">#&gt; $ alternatenames: chr  "Circonscription de Vogan, Prefecture de Vo, Pr√©fecture de Vo, ...</span></span>
<span><span class="co">#&gt; $ adm2          : chr  "Vo Prefecture" "Zio Prefecture" "Tchaoudjo" "Tchamba" ...</span></span>
<span><span class="co">#&gt; $ latitude      : num  6.42 6.58 9 8.83 6.67 ...</span></span>
<span><span class="co">#&gt; $ longitude     : num  1.5 1.17 1.17 1.42 1.5 ...</span></span>
<span><span class="co">#&gt; $ last_updated  : IDate, format: "2019-01-08" "2019-01-08" "2022-02-17" "2022-02-17" ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="clean-administrative-names">Clean administrative names<a class="anchor" aria-label="anchor" href="#clean-administrative-names"></a>
</h3>
<p>You can clean administrative names using them
<code>clean_admin_names</code> function, which uses various matching and
string distance algorithms to match your admin data, using your own list
of admin names as well admin names from <code>GeoNames</code>
website.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get simulated epi data for Togo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">fake_epi_df_togo</span><span class="op">)</span></span>
<span><span class="co"># Referecne dataset with clean admin names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">togo_admin_df</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Lets check how the matching looks </span></span>
<span><span class="fu"><a href="../reference/clean_admin_names.html">clean_admin_names</a></span><span class="op">(</span></span>
<span>     country_code <span class="op">=</span> <span class="st">"Togo"</span>,</span>
<span>     admin_names_to_clean <span class="op">=</span> <span class="va">fake_epi_df_togo</span><span class="op">$</span><span class="va">district</span>,  </span>
<span>     user_base_admin_names <span class="op">=</span> <span class="va">togo_admin_df</span><span class="op">$</span><span class="va">district</span>, </span>
<span>     report_mode <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span></span>
<span><span class="co">#&gt; There are 15 out of 15 (100%) admins that have been perfectly matched!</span></span>
<span><span class="co">#&gt;   # A tibble: 15 √ó 5</span></span>
<span><span class="co">#&gt;  names_to_clean  final_names     ource_of_cleaned_name        prop_matched  matching_algorithm  </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;           &lt;chr&gt;                          &lt;dbl&gt;       &lt;chr&gt;               </span></span>
<span><span class="co">#&gt;  1 Bas-Mono      Bas-Mono        User base admin names          100         Levenshtein Distance</span></span>
<span><span class="co">#&gt;  2 Bliita        Blitta          Main admin name from geonames  100         Soundex             </span></span>
<span><span class="co">#&gt;  3 Centrale      Centrale        User base admin names          100         Levenshtein Distance</span></span>
<span><span class="co">#&gt;  4 Cinkaasi      Cinkass√©        User base admin names          100         Soundex             </span></span>
<span><span class="co">#&gt;  5 Dankben       Dankpen         Main admin name from geonames  100         Soundex             </span></span>
<span><span class="co">#&gt;  6 East-Mono     Est-Mono        Main admin name from geonames  100         Soundex             </span></span>
<span><span class="co">#&gt;  7 Kaloto        Kloto           Main admin name from geonames  100         Soundex             </span></span>
<span><span class="co">#&gt;  8 Ke√©ran        Keran           Alternative name from geonames 100         Soundex             </span></span>
<span><span class="co">#&gt;  9 Lom√©          Lom√©            User base admin names          100         Levenshtein Distance</span></span>
<span><span class="co">#&gt; 10 Ogou          Ogou            Main admin name from geonames  100         Levenshtein Distance</span></span>
<span><span class="co">#&gt; 11 Sotouboua     Sotouboua       Main admin name from geonames  100         Levenshtein Distance</span></span>
<span><span class="co">#&gt; 12 Tchamaba      Tchamba         Main admin name from geonames  100         Soundex             </span></span>
<span><span class="co">#&gt; 13 Vo            Vo Prefecture   Main admin name from geonames  100         Levenshtein Distance</span></span>
<span><span class="co">#&gt; 14 Yotto         Yoto            Main admin name from geonames  100         Soundex    </span></span>
<span><span class="co">#&gt; 15 Zioo          Zio Prefecture  Main admin name from geonames  100         Soundex         </span></span>
<span></span>
<span><span class="co"># If we are happy with the names, we can update the old names with the new ones</span></span>
<span><span class="co"># otherwise we can further clean the names manually</span></span>
<span><span class="va">fake_epi_df_togo</span><span class="op">$</span><span class="va">district</span> <span class="op">&lt;-</span> </span>
<span><span class="fu"><a href="../reference/clean_admin_names.html">clean_admin_names</a></span><span class="op">(</span></span>
<span>        country_code <span class="op">=</span> <span class="st">"Togo"</span>,</span>
<span>        admin_names_to_clean <span class="op">=</span> <span class="va">fake_epi_df_togo</span><span class="op">$</span><span class="va">district</span>, </span>
<span>        user_base_admin_names <span class="op">=</span> <span class="va">togo_admin_df</span><span class="op">$</span><span class="va">district</span>, </span>
<span>        report_mode <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-unit-testing-functions">Create unit testing functions<a class="anchor" aria-label="anchor" href="#create-unit-testing-functions"></a>
</h3>
<p>The <code>create_test</code> is there so users can create their own
functions in which they can use for unit-testing when working with
datasets that require lots of manipulation and wrangling. This function
(plus the <code>tidylog</code> package) will save users from the
headache of troubleshooting issues related to data joins and
transformations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up a unit-testing fucntion</span></span>
<span><span class="va">my_tests</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_test.html">create_test</a></span><span class="op">(</span></span>
<span>        <span class="co"># For checking the dimension of the data</span></span>
<span>        dimension_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">900</span>, <span class="fl">9</span><span class="op">)</span>, </span>
<span>        <span class="co"># For expected number of combinations in data</span></span>
<span>        combinations_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"month"</span>, <span class="st">"year"</span>, <span class="st">"district"</span><span class="op">)</span>,</span>
<span>        expectation <span class="op">=</span> <span class="fl">12</span> <span class="op">*</span> <span class="fl">5</span> <span class="op">*</span> <span class="fl">15</span><span class="op">)</span>,</span>
<span>        <span class="co"># Check repeated cols, rows and max and min thresholds</span></span>
<span>        row_duplicates <span class="op">=</span> <span class="cn">TRUE</span>, col_duplicates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        max_threshold_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>malaria_tests <span class="op">=</span> <span class="fl">1000</span>, cholera_tests <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>,</span>
<span>        min_threshold_test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cholera_cases <span class="op">=</span> <span class="fl">0</span>, cholera_cases <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span></span>
<span><span class="co"># Apply your unit-test on your data</span></span>
<span><span class="fu">my_tests</span><span class="op">(</span><span class="va">fake_epi_df_togo</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Test passed! You have the correct number of dimensions!</span></span>
<span><span class="co">#&gt; Test passed! No duplicate rows found!</span></span>
<span><span class="co">#&gt; Test passed! No repeated columns found!</span></span>
<span><span class="co">#&gt; Test passed! You have the correct number of combinations for month, year, district!</span></span>
<span><span class="co">#&gt; Test passed! Values in column cholera_cases are above the threshold.</span></span>
<span><span class="co">#&gt; Test passed! Values in column cholera_cases are above the threshold.</span></span>
<span><span class="co">#&gt; Test passed! Values in column malaria_tests are below the threshold.</span></span>
<span><span class="co">#&gt; Test passed! Values in column cholera_tests are below the threshold.</span></span>
<span></span>
<span><span class="co">#&gt; Congratulations! All tests passed: 8/8 (100%) üòÄ</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="consistency-check">Consistency check<a class="anchor" aria-label="anchor" href="#consistency-check"></a>
</h3>
<p>The <code>consistency_check</code> function serves as a function for
validating the logical relationships between variables. For instance, if
you know that the number of disease cases cannot exceed the number of
tests for that disease, this function helps inspect such expected
behaviours in your data.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run checks using Togo data</span></span>
<span><span class="fu"><a href="../reference/consistency_check.html">consistency_check</a></span><span class="op">(</span><span class="va">fake_epi_df_togo</span>,</span>
<span>                  tests <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"malaria_tests"</span>, <span class="st">"cholera_tests"</span><span class="op">)</span>,</span>
<span>                  cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"malaria_cases"</span>, <span class="st">"cholera_cases"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt; Consistency test passed for malaria_tests vs malaria_cases: There are more tests than there are cases!</span></span>
<span><span class="co">#&gt; Consistency test failed for cholera_tests vs cholera_cases: There are 3 (0.33%) rows where cases are greater than tests.             </span></span>
<span></span>
<span><span class="co"># You can even save the plot if you want</span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"../man/figures/consistency_plot.png"</span>, width <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                height <span class="op">=</span> <span class="fl">5.75</span>, scale <span class="op">=</span> <span class="fl">0.95</span>, dpi <span class="op">=</span> <span class="fl">400</span>, bg <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span>
<span>                  </span></code></pre></div>
<p><img src="../reference/figures/consistency_plot.png" align="center" height="545"></p>
</div>
<div class="section level3">
<h3 id="detecting-and-handling-outliers">Detecting and handling outliers<a class="anchor" aria-label="anchor" href="#detecting-and-handling-outliers"></a>
</h3>
<p>The <code>handle_outliers</code> function is designed for both
identifying and addressing outliers in your dataset. It supports
multiple statistical methods for outlier detection, such as Z-score,
modified Z-score, and Interquartile Range. Beyond detection, the
function offers various options for handling outliers, including removal
or replacement with mean, median, grouped means, or quantiles.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the variables</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"malaria_tests"</span>, <span class="st">"malaria_cases"</span>,</span>
<span>               <span class="st">"cholera_tests"</span>, <span class="st">"cholera_cases"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get outliers report</span></span>
<span><span class="va">outliers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/handle_outliers.html">handle_outliers</a></span><span class="op">(</span></span>
<span>    <span class="va">fake_epi_df_togo</span>, vars <span class="op">=</span> <span class="va">variables</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"zscore"</span>, report_mode <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the report</span></span>
<span><span class="va">outliers</span><span class="op">$</span><span class="va">report</span></span>
<span></span>
<span><span class="co">#&gt;   variable      test    outliers prop_outliers</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;   &lt;glue&gt;   &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1 malaria_tests Z-Score 5/900    &lt;1%          </span></span>
<span><span class="co">#&gt; 2 malaria_cases Z-Score 5/900    &lt;1%          </span></span>
<span><span class="co">#&gt; 3 cholera_tests Z-Score 2/900    &lt;1%          </span></span>
<span><span class="co">#&gt; 4 cholera_cases Z-Score 1/900    &lt;1%          </span></span>
<span></span>
<span><span class="co"># Get the plot</span></span>
<span><span class="va">outliers</span><span class="op">$</span><span class="va">plot</span></span>
<span></span>
<span><span class="co"># You can even save the plot if you want</span></span>
<span><span class="co"># ggplot2::ggsave("../man/figures/outliers_plot.png", width = 10, </span></span>
<span><span class="co">#                height = 7, scale = 0.95, dpi = 400)</span></span>
<span></span>
<span><span class="co"># If happy, create a dataframe with the outliers handled </span></span>
<span><span class="va">fake_epi_df_togo_no_outliers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/handle_outliers.html">handle_outliers</a></span><span class="op">(</span></span>
<span>                                       <span class="va">fake_epi_df_togo</span>, vars <span class="op">=</span> <span class="va">variables</span>, </span>
<span>                                       method <span class="op">=</span> <span class="st">"zscore"</span>, report_mode <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                                       treat_method <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/outliers_plot.png" align="center" height="575"></p>
</div>
<div class="section level3">
<h3 id="checking-missing-data-and-reporting-rates-over-factors">Checking missing data and reporting rates over factors<a class="anchor" aria-label="anchor" href="#checking-missing-data-and-reporting-rates-over-factors"></a>
</h3>
<p>The <code>missing_plot</code> function allows you to visualize
missing data across different variables, either by a single factor like
time or district, or by two factors simultaneously like date and
district. This is particularly useful when you‚Äôre dealing with
epidemiological data that might have varying degrees of completeness
across different times or locations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make date columns</span></span>
<span><span class="va">fake_epi_df_togo2</span> <span class="op">&lt;-</span> <span class="va">fake_epi_df_togo</span> <span class="op">|&gt;</span> </span>
<span>   <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">month</span>, <span class="st">"/01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># Missing rate for variables across dates</span></span>
<span><span class="fu"><a href="../reference/missing_plot.html">missing_plot</a></span><span class="op">(</span><span class="va">fake_epi_df_togo2</span>, miss_vars <span class="op">=</span> <span class="va">variables</span>, </span>
<span>              x_var <span class="op">=</span> <span class="st">"date"</span>, use_rep_rate <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/missing_plot_a.png" align="center" height="635"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reporting rate for malaria_cases across dates and districts</span></span>
<span><span class="fu"><a href="../reference/missing_plot.html">missing_plot</a></span><span class="op">(</span><span class="va">fake_epi_df_togo2</span>, miss_vars <span class="op">=</span> <span class="st">"malaria_cases"</span>, </span>
<span>              x_var <span class="op">=</span> <span class="st">"date"</span>, y_var <span class="op">=</span> <span class="st">"district"</span>, use_rep_rate <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/missing_plot_b.png" align="center" height="635"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Mohamed A. Yusuf.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
